# Spike sorting environment for kilosort4 with RTX 5090
#
# usage: 
#
# 1. move to repo and create env with $ mamba env create -f envs/kilosort4_rtx5090.yml --prefix ./envs/kilosort4_rtx5090
# 2. activate env: $ mamba activate ./envs/kilosort4_rtx5090

name: spikebias
channels:
  - conda-forge
  - nvidia
  - pytorch
dependencies:
  - python=3.9.7
  - ipykernel=6.29.5                   
  - ipywidgets=8.0.6           # notebook
  - jupyter=1.0.0              # notebook
  - ipython=8.18.1
  - pandas=1.5.2               # version important; bluepy fails with 1.5.3
  - pyyaml=6.0.2               # read yaml config files
  - scikit-learn=1.6.0         # machine learning
  - networkx=3.2.1
  - matplotlib=3.8.4           # plotting
  - numpy=1.26.4               # data processing
  - pyyaml=6.0.2
  - pytables=3.9.2             # read h5 files
  - fastparquet=2024.11.0      # save parquet file
  - pyarrow=16.1.0
  - h5py=3.13.0                # read H5 files
  - pip:
    - spikeinterface==0.100.8   # 0.100.8 critical for kilosort 4 (includes several merged fixes)
    - kilosort==4.0.6           # spike sorter inst all Kilosort 4.0.6
    - --pre torch --index-url https://download.pytorch.org/whl/nightly/cu128 # torch for machine learning compatible with RTX5090